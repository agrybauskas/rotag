#!/usr/bin/perl

use strict;
use warnings;

use lib "../../lib/perl";
use CifParser qw( obtain_atom_site );
use SidechainModels qw( rotation_only );

my $atom_specifier = shift;

# Parses selector argument from string  to proper array.
my %atom_specifier = ( map { $_->[0] => [ split( ",", @$_[1] ) ] }
		    map { [ split( " ", $_ ) ] }
		    split( "&", $atom_specifier ) );

# Selects atom's data for further analysis.
my $atom_site = obtain_atom_site( <> );

# In Jmol, generates pseudo-atoms which represent positions of atom
# after rotation along dihedral angle.
rotation_only( $atom_site, \%atom_specifier );
