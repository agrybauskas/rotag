#!/usr/bin/perl

use strict;
use warnings;

use lib "../../lib/perl";
use SidechainModels;

use lib "../lib";
use Utils;

use Data::Dumper;

my $attribute_selector = shift;

# Parses selector argument from string  to proper array.
my %attribute_selector = ( map { $_->[0] => [ split( ",", @$_[1] ) ] }
                           map { [ split( " ", $_ ) ] }
                           split( "&", $attribute_selector ) );

# Selects atom's data for further analysis.
my $filtered_atoms =
    CifParser::filter_atoms( \%attribute_selector,
			     &CifParser::obtain_atom_site( <> ) );

# In Jmol, generates pseudo-atoms which represent positions of atom
# after rotation along dihedral angle.
SidechainModels::rotation_only( $filtered_atoms );
