#!/usr/bin/perl

use strict;
use warnings;

use LinearAlgebra qw( pi );
use PDBxParser qw( to_pdbx );
use PseudoAtoms qw( generate_library );

my ( $residue_id,
     $conf_model,
     $small_angle,
     $potential,
     $cutoff,
     $pdbx_dump_file ) = @ARGV;

my $atom_site;
open( my $fh, "<", $pdbx_dump_file );
while( <$fh> ) {
    $atom_site .= "$_" ;
}
close( $fh );
$atom_site = eval( $atom_site );

$small_angle =~ s/pi/pi\(\)/g;

# # Creates pseudo-atoms for given analytical equation that describes conformation
# # of atom.
# %{ $atom_site } =
#     ( %{ $atom_site },
#       %{ generate_library( { "atom_site"     => $atom_site,
# 			     "residue_ids"   => [ $residue_id ],
# 			     "small_angle"   => eval( $small_angle ),
# 			     "conf_model" => $conf_model,
# 			     "interactions"  => $potential,
# 			     "cutoff"        => $cutoff  } ) } );

# # Prints out PDBx format file.
# to_pdbx( $atom_site );
